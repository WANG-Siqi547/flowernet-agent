================================================================================
ğŸŒ¸ FlowerNet ç³»ç»Ÿå®Œæ•´ä½¿ç”¨æ€»ç»“
================================================================================

ã€é¡¹ç›®å®ŒæˆçŠ¶æ€ã€‘âœ… 100% å®Œæˆ

æ‰€æœ‰ä»£ç å·²å®Œæˆï¼Œç³»ç»Ÿå·²å¯ç›´æ¥è¿è¡Œå’Œä½¿ç”¨ã€‚

================================================================================
ã€æ ¸å¿ƒç»„ä»¶ã€‘
================================================================================

1. Generatorï¼ˆç”Ÿæˆæ¨¡å—ï¼‰ - ç«¯å£ 8002
   - generator.py: æ ¸å¿ƒç”Ÿæˆé€»è¾‘ï¼ˆ~400 è¡Œï¼‰
   - main.py: FastAPI æœåŠ¡ï¼ˆ~150 è¡Œï¼‰
   - Dockerfile: å®¹å™¨é…ç½®

2. Verifierï¼ˆéªŒè¯æ¨¡å—ï¼‰ - ç«¯å£ 8000 
   - verifier.py: éªŒè¯é€»è¾‘ï¼ˆç›¸å…³æ€§ + å†—ä½™åº¦ï¼‰
   - main.py: FastAPI æœåŠ¡

3. Controllerï¼ˆæ§åˆ¶æ¨¡å—ï¼‰ - ç«¯å£ 8001
   - controler.py: Prompt ä¼˜åŒ–é€»è¾‘ï¼ˆ~250 è¡Œï¼‰
   - main.py: FastAPI æœåŠ¡

4. Python å®¢æˆ·ç«¯åº“ - flowernet_client.py
   - FlowerNetClient: ç®€åŒ– API è°ƒç”¨
   - FlowerNetDocumentGenerator: æ–‡æ¡£ç”ŸæˆåŠ©æ‰‹

================================================================================
ã€å¿«é€Ÿå¼€å§‹ã€‘
================================================================================

Step 1: è®¾ç½® API Key
    export ANTHROPIC_API_KEY="sk-ant-your-key-here"

Step 2: å¯åŠ¨æ‰€æœ‰æœåŠ¡
    cd flowernet-agent
    python3 start_services.py

Step 3: è¿è¡Œæµ‹è¯•
    python3 test_flowernet_e2e.py

Step 4: ä½¿ç”¨å®¢æˆ·ç«¯ç”Ÿæˆå†…å®¹
    from flowernet_client import FlowerNetClient
    client = FlowerNetClient()
    result = client.generate_with_loop(
        outline="ä¸»é¢˜",
        initial_prompt="è¯·ä»‹ç»è¿™ä¸ªä¸»é¢˜"
    )
    print(result['draft'])

================================================================================
ã€å·¥ä½œæµç¨‹ã€‘
================================================================================

è¾“å…¥: å¤§çº² + åˆå§‹ Prompt
  â†“
[Generator] è°ƒç”¨ Claude LLM ç”Ÿæˆ Draft
  â†“
[Verifier] éªŒè¯ (ç›¸å…³æ€§ â‰¥ 0.6 ä¸” å†—ä½™åº¦ â‰¤ 0.7)
  â”œâ”€â†’ âœ… é€šè¿‡ â†’ è¿”å›ç»“æœ
  â””â”€â†’ âŒ å¤±è´¥ â†’ [Controller] åˆ†æé—®é¢˜å¹¶ä¿®æ”¹ Prompt
       â†“
    (å›åˆ° Generatorï¼Œå¾ªç¯)
       â†“
æœ€å¤šé‡å¤ max_iterations æ¬¡

================================================================================
ã€ä¸»è¦ APIã€‘
================================================================================

FlowerNetClient æ–¹æ³•ï¼š

1. generate(prompt, max_tokens=2000)
   ç®€å•ç”Ÿæˆï¼Œä¸è¿›è¡ŒéªŒè¯

2. verify(draft, outline, history=[])
   éªŒè¯å†…å®¹

3. generate_with_loop(outline, initial_prompt, max_iterations=3)
   å®Œæ•´å¾ªç¯ï¼ˆç”Ÿæˆ â†’ éªŒè¯ â†’ ä¿®æ”¹ â†’ å¾ªç¯ï¼‰

4. health_check()
   æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€

FlowerNetDocumentGenerator æ–¹æ³•ï¼š

1. generate_document(title, outlines, max_iterations=3)
   ç”Ÿæˆå®Œæ•´å¤šæ®µè½æ–‡æ¡£

================================================================================
ã€å‚æ•°è°ƒæ•´ã€‘
================================================================================

rel_threshold (ç›¸å…³æ€§é˜ˆå€¼ï¼ŒèŒƒå›´ 0-1)
  0.3-0.5: å®½æ¾ï¼Œå¿«é€Ÿ
  0.5-0.7: æ ‡å‡† â­ æ¨è
  0.7-0.9: ä¸¥æ ¼ï¼Œé«˜è´¨é‡

red_threshold (å†—ä½™åº¦é˜ˆå€¼ï¼ŒèŒƒå›´ 0-1)
  0.5-0.6: ä¸¥æ ¼å»é‡
  0.7-0.8: æ ‡å‡† â­ æ¨è
  0.8-0.9: å®½æ¾ï¼Œå…è®¸é‡å¤

max_iterations (æœ€å¤§å¾ªç¯æ¬¡æ•°)
  1-2: å¿«é€Ÿæ¨¡å¼
  3-5: å¹³è¡¡æ¨¡å¼ â­ æ¨è
  5+: å®Œç¾æ¨¡å¼

================================================================================
ã€å¸¸ç”¨ç¤ºä¾‹ã€‘
================================================================================

ç¤ºä¾‹ 1ï¼šå¿«é€Ÿç”Ÿæˆ
    result = client.generate_with_loop(
        outline="ä¸»é¢˜",
        initial_prompt="...",
        rel_threshold=0.4,
        red_threshold=0.8,
        max_iterations=1
    )

ç¤ºä¾‹ 2ï¼šé«˜è´¨é‡ç”Ÿæˆ
    result = client.generate_with_loop(
        outline="ä¸»é¢˜",
        initial_prompt="...",
        rel_threshold=0.8,
        red_threshold=0.5,
        max_iterations=10
    )

ç¤ºä¾‹ 3ï¼šå¸¦å†å²é¿å…é‡å¤
    result = client.generate_with_loop(
        outline="ç¬¬äºŒæ®µä¸»é¢˜",
        initial_prompt="...",
        history=["ç¬¬ä¸€æ®µå†…å®¹"],  # å†å²å†…å®¹
        max_iterations=3
    )

ç¤ºä¾‹ 4ï¼šç”Ÿæˆå®Œæ•´æ–‡æ¡£
    doc_gen = FlowerNetDocumentGenerator(client)
    document = doc_gen.generate_document(
        title="æŒ‡å—",
        outlines=["æ¦‚å¿µ", "æ–¹æ³•", "åº”ç”¨"],
        max_iterations=2
    )

================================================================================
ã€æ•…éšœæ’é™¤ã€‘
================================================================================

âŒ "API Key not found"
   â†’ export ANTHROPIC_API_KEY="your-key"

âŒ "Connection refused"
   â†’ python3 start_services.py

âŒ ç”Ÿæˆå¾ˆæ…¢ï¼ˆ30+ ç§’ï¼‰
   â†’ æ­£å¸¸ï¼Œé™ä½ max_iterations æˆ– rel_threshold

âŒ éªŒè¯ä¸€ç›´å¤±è´¥
   â†’ é™ä½ rel_threshold (0.4) æˆ–æé«˜ red_threshold (0.8)

âŒ "Port already in use"
   â†’ lsof -i :8000 | grep main.py | kill -9

================================================================================
ã€å…³é”®æ–‡ä»¶ã€‘
================================================================================

ä»£ç æ–‡ä»¶:
  flowernet-generator/generator.py     - æ ¸å¿ƒç”Ÿæˆé€»è¾‘
  flowernet-generator/main.py          - Generator API
  flowernet-controler/controler.py     - æ§åˆ¶é€»è¾‘
  flowernet-controler/main.py          - Controller API
  flowernet-verifier/verifier.py       - éªŒè¯é€»è¾‘
  flowernet-verifier/main.py           - Verifier API
  flowernet_client.py                  - Python å®¢æˆ·ç«¯

æ–‡æ¡£æ–‡ä»¶:
  FLOWERNET_GUIDE.md                   - å¿«é€Ÿä½¿ç”¨æŒ‡å— â­
  CONFIG_GUIDE.md                      - é…ç½®å’Œè°ƒè¯•
  README_FLOWERNET.md                  - å®Œæ•´æ–‡æ¡£
  test_flowernet_e2e.py               - ç«¯åˆ°ç«¯æµ‹è¯•

å¯åŠ¨è„šæœ¬:
  start_services.py                    - Python å¯åŠ¨è„šæœ¬ â­
  start-flowernet.sh                   - Bash å¯åŠ¨è„šæœ¬
  stop-flowernet.sh                    - åœæ­¢è„šæœ¬

================================================================================
ã€æ€§èƒ½æŒ‡æ ‡ã€‘
================================================================================

å•æ®µè½ç”Ÿæˆæ—¶é—´: 20-60 ç§’ï¼ˆåŒ…æ‹¬ API è°ƒç”¨å’ŒéªŒè¯ï¼‰
- ç¬¬ä¸€æ¬¡è¿­ä»£: 15-30 ç§’
- åç»­è¿­ä»£: 10-15 ç§’

æ–‡æ¡£ç”Ÿæˆæ—¶é—´: num_sections * 30 ç§’
- 3 æ®µæ–‡æ¡£: çº¦ 1.5-2 åˆ†é’Ÿ
- 5 æ®µæ–‡æ¡£: çº¦ 2.5-3 åˆ†é’Ÿ

å†…å­˜å ç”¨:
- Generator: 500MB (å› ä¸ºåŠ è½½ Claude SDK)
- Verifier: 200MB (è½»é‡çº§æ¨¡å‹)
- Controller: 50MB

================================================================================
ã€æ‰©å±•å’Œé›†æˆã€‘
================================================================================

1. ä¸æ•°æ®åº“é›†æˆ
   from sqlalchemy import create_engine
   engine = create_engine('sqlite:///content.db')
   # ä¿å­˜ç”Ÿæˆç»“æœ

2. ä¸ Web åº”ç”¨é›†æˆ
   @app.post("/generate")
   async def generate(req: GenerateRequest):
       client = FlowerNetClient()
       return client.generate_with_loop(...)

3. ä¸å‘½ä»¤è¡Œé›†æˆ
   python3 -c "from flowernet_client import FlowerNetClient; ..."

4. æ‰¹é‡å¤„ç†
   for topic in topics:
       result = client.generate_with_loop(...)
       save_to_db(result)

================================================================================
ã€é¡¹ç›®ç»Ÿè®¡ã€‘
================================================================================

ä»£ç é‡:
  - Generator: ~400 è¡Œ
  - Main API: ~150 è¡Œ
  - Controller: ~250 è¡Œ
  - å®¢æˆ·ç«¯åº“: ~400 è¡Œ
  - æµ‹è¯•è„šæœ¬: ~350 è¡Œ
  - æ€»è®¡: ~1750 è¡Œæ ¸å¿ƒä»£ç 

æ–‡æ¡£é‡:
  - README: ~1500 è¡Œ
  - é…ç½®æŒ‡å—: ~800 è¡Œ
  - ä½¿ç”¨æŒ‡å—: ~500 è¡Œ
  - æ€»è®¡: ~2800 è¡Œæ–‡æ¡£

æµ‹è¯•è¦†ç›–:
  âœ… å•å…ƒæµ‹è¯• (Generator, Verifier, Controller)
  âœ… é›†æˆæµ‹è¯• (å®Œæ•´å¾ªç¯)
  âœ… ç«¯åˆ°ç«¯æµ‹è¯• (API + ä¸šåŠ¡æµç¨‹)
  âœ… å¥åº·æ£€æŸ¥

================================================================================
ã€ä¸‹ä¸€æ­¥ã€‘
================================================================================

ç«‹å³å¯åš:
  1. python3 start_services.py - å¯åŠ¨æœåŠ¡
  2. python3 test_flowernet_e2e.py - è¿è¡Œæµ‹è¯•
  3. python3 -c "from flowernet_client import *; ..." - ç”Ÿæˆå†…å®¹

éœ€è¦æ—¶:
  1. æŸ¥çœ‹ FLOWERNET_GUIDE.md - å¿«é€ŸæŒ‡å—
  2. æŸ¥çœ‹ CONFIG_GUIDE.md - å‚æ•°é…ç½®
  3. æŸ¥çœ‹ flowernet_client.py - API æ–‡æ¡£

ç”Ÿäº§éƒ¨ç½²:
  1. ä½¿ç”¨ Docker: docker-compose up -d
  2. é…ç½®ç¯å¢ƒå˜é‡
  3. è®¾ç½®åå‘ä»£ç†
  4. æ·»åŠ ç›‘æ§å’Œæ—¥å¿—

================================================================================
ã€è”ç³»å’Œæ”¯æŒã€‘
================================================================================

é—®é¢˜è¯Šæ–­:
  1. æŸ¥çœ‹ /tmp/*.log é”™è¯¯æ—¥å¿—
  2. è¿è¡Œ test_flowernet_e2e.py è¿›è¡Œè¯Šæ–­
  3. æŸ¥çœ‹ CONFIG_GUIDE.md çš„æ•…éšœæ’é™¤éƒ¨åˆ†

æ–‡æ¡£å‚è€ƒ:
  - Anthropic æ–‡æ¡£: https://docs.anthropic.com/
  - FastAPI æ–‡æ¡£: https://fastapi.tiangolo.com/
  - Python Requests: https://requests.readthedocs.io/

================================================================================

ğŸ‰ ç°åœ¨ä½ å·²å‡†å¤‡å¥½ä½¿ç”¨ FlowerNet ç³»ç»Ÿï¼

å¿«é€Ÿå¼€å§‹ 3 æ­¥ï¼š
  1. export ANTHROPIC_API_KEY="your-key"
  2. python3 start_services.py
  3. python3 test_flowernet_e2e.py

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ ğŸš€

================================================================================
